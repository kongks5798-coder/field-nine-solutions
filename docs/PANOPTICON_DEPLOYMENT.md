# Panopticon 프로덕션 배포 가이드

## 1. Vercel 환경변수 설정

Vercel Dashboard > Settings > Environment Variables에서 다음 변수들을 설정하세요.

### 필수 환경변수

| 변수명 | 설명 | 예시 |
|--------|------|------|
| `PANOPTICON_PASSWORD` | 대시보드 로그인 비밀번호 | `your-secure-password` |
| `GOOGLE_SERVICE_ACCOUNT_JSON` | Google API 서비스 계정 JSON | `{"type":"service_account",...}` |
| `GOOGLE_SALES_SPREADSHEET_ID` | 매출 데이터 스프레드시트 ID | `1ABC...xyz` |

### 선택 환경변수

| 변수명 | 설명 | 기본값 |
|--------|------|--------|
| `GOOGLE_CALENDAR_ID` | 캘린더 ID | `primary` |
| `GOOGLE_DRIVE_FOLDER_ID` | 드라이브 폴더 ID | (전체 드라이브) |
| `GOOGLE_DAILY_SALES_SHEET` | 일일매출 시트명 | `일일매출` |
| `GOOGLE_ORDERS_SHEET` | 주문현황 시트명 | `주문현황` |
| `GOOGLE_CLAIMS_SHEET` | 클레임현황 시트명 | `클레임현황` |
| `GOOGLE_PRODUCTS_SHEET` | 상품현황 시트명 | `상품현황` |
| `GOOGLE_GOALS_SHEET` | 목표설정 시트명 | `목표설정` |

---

## 2. Google Sheets 설정

### 2.1 필요한 시트 탭 생성

스프레드시트에 다음 탭들을 생성하세요:

#### 일일매출
| 날짜 | 채널 | 주문수 | 매출액 | 수수료 | 순매출 | 환불액 | 반품수 |
|------|------|--------|--------|--------|--------|--------|--------|
| 2025-01-16 | 무신사 | 50 | 5,000,000 | 500,000 | 4,500,000 | 100,000 | 2 |

#### 주문현황
| 날짜 | 결제완료 | 상품준비 | 배송중 | 배송완료 | 구매확정 | 긴급출고 |
|------|----------|----------|--------|----------|----------|----------|
| 2025-01-16 | 15 | 8 | 30 | 45 | 120 | 3 |

#### 클레임현황
| 날짜 | 환불요청 | 환불완료 | 교환요청 | 교환완료 | 긴급처리 |
|------|----------|----------|----------|----------|----------|
| 2025-01-16 | 5 | 3 | 2 | 1 | 2 |

#### 상품현황
| 날짜 | 판매중 | 품절 | 판매중지 | 전체 |
|------|--------|------|----------|------|
| 2025-01-16 | 150 | 12 | 5 | 167 |

#### 목표설정
| 월 | 매출목표 | 주문목표 | 현재매출 | 현재주문 | 메모 |
|------|----------|----------|----------|----------|------|
| 2025-01 | 200000000 | 3000 | 150000000 | 2200 | 1월 목표 |

### 2.2 서비스 계정 권한 부여

1. Google Cloud Console에서 서비스 계정 이메일 확인
2. 스프레드시트 공유 설정에서 해당 이메일에 **편집자** 권한 부여

---

## 3. 배포 체크리스트

### 배포 전
- [ ] 모든 환경변수 설정 완료
- [ ] Google Sheets 권한 설정 완료
- [ ] 로컬에서 `npm run build` 성공
- [ ] 비밀번호 안전한 값으로 변경

### 배포 후
- [ ] `/panopticon/login` 접속 확인
- [ ] 로그인 성공 확인
- [ ] 매출 데이터 표시 확인
- [ ] Google Calendar 연동 확인
- [ ] 로그아웃 기능 확인

---

## 4. 도메인 설정 (선택)

### 서브도메인 설정 예시

Vercel에서 커스텀 도메인 추가:
- `ceo.fieldnine.io` → Panopticon 대시보드

또는 경로 기반:
- `fieldnine.io/panopticon` (현재 설정)

---

## 5. 일일 데이터 입력 워크플로우

### 매일 아침 (권장 시간: 09:00)

1. **무신사 파트너센터** 접속
2. 주문현황 확인 → Google Sheets `주문현황` 탭에 입력
3. 클레임현황 확인 → Google Sheets `클레임현황` 탭에 입력
4. 상품현황 확인 → Google Sheets `상품현황` 탭에 입력

### 매일 저녁 (권장 시간: 18:00)

1. 무신사에서 일일 매출 엑셀 다운로드
2. Google Sheets `일일매출` 탭에 데이터 추가

### 자동화 옵션 (향후)
- Google Apps Script로 무신사 엑셀 자동 파싱
- Zapier/Make 연동으로 알림 자동화

---

## 6. 보안 권장사항

1. **비밀번호 강화**: 최소 12자, 특수문자 포함
2. **정기 비밀번호 변경**: 월 1회 권장
3. **접속 로그 확인**: Vercel Analytics 활용
4. **2단계 인증**: 향후 Google OAuth 연동 고려

---

## 7. 문제 해결

### Google Sheets 연결 실패
```
원인: 서비스 계정 권한 없음
해결: 스프레드시트 공유 설정에서 서비스 계정 이메일에 편집자 권한 부여
```

### 로그인 안됨
```
원인: PANOPTICON_PASSWORD 미설정
해결: Vercel 환경변수에 PANOPTICON_PASSWORD 추가 후 재배포
```

### 데이터가 0으로 표시
```
원인: 시트에 데이터 없음 또는 시트명 불일치
해결: 시트 탭 이름이 환경변수와 일치하는지 확인
```
