# âœ… Phase 2 ì™„ë£Œ ë³´ê³ ì„œ: E-Commerce SaaS ì•„í‚¤í…ì²˜ (ìƒìš© ìˆ˜ì¤€)

## ì™„ë£Œëœ ì‘ì—…

### 1. DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (ìƒìš© SaaS ìˆ˜ì¤€) âœ…

#### ìƒì„±ëœ SQL ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼:
1. **`005_commercial_stores_table.sql`** - ì‡¼í•‘ëª° ì—°ë™ ì •ë³´
   - í”Œë«í¼ ì§€ì›: ë„¤ì´ë²„, ì¿ íŒ¡, 11ë²ˆê°€, ì§€ë§ˆì¼“, ì˜¥ì…˜, ì‡¼í”¼íŒŒì´, ìš°ì»¤ë¨¸ìŠ¤, ì¹´í˜24, ë©”ì´í¬ìƒµ, ì»¤ìŠ¤í…€
   - API ì¸ì¦ ì •ë³´ ê´€ë¦¬ (api_key, api_secret, access_token, refresh_token)
   - ì›¹í›… ì„¤ì • (webhook_url, webhook_secret)
   - ë™ê¸°í™” ì„¤ì • (sync_enabled, sync_interval_minutes, last_sync_at, last_sync_status)
   - í”Œë«í¼ë³„ ìˆ˜ìˆ˜ë£Œìœ¨ ê´€ë¦¬ (fee_settings JSONB)
   - RLS ì •ì±… ì ìš©

2. **`006_commercial_products_table.sql`** - ìƒí’ˆ ë§ˆìŠ¤í„°
   - ìƒí’ˆ ì‹ë³„ì: SKU, ë°”ì½”ë“œ, ì™¸ë¶€ ìƒí’ˆ ID
   - ê°€ê²© ì •ë³´: ë§¤ì…ê°€(cost_price), íŒë§¤ê°€(sale_price), ì†Œë§¤ê°€(retail_price)
   - ìë™ ê³„ì‚°: ë§ˆì§„ ê¸ˆì•¡, ë§ˆì§„ìœ¨ (ê³„ì‚°ëœ ì»¬ëŸ¼)
   - ì¬ê³  ê´€ë¦¬: í˜„ì¬ ì¬ê³ , ì˜ˆì•½ ìˆ˜ëŸ‰, ê°€ìš© ì¬ê³ , ìµœì†Œ/ìµœëŒ€ ì¬ê³  ìˆ˜ì¤€
   - ë°°ì†¡ ì •ë³´: ë¬´ê²Œ, í¬ê¸°, ë°°ì†¡ë¹„, ë¬´ë£Œë°°ì†¡ ê¸°ì¤€
   - ì˜µì…˜ ì •ë³´: JSONBë¡œ ìƒ‰ìƒ, ì‚¬ì´ì¦ˆ ë“± ê´€ë¦¬
   - ì¬ê³  ìë™ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°

3. **`007_commercial_orders_table.sql`** - í†µí•© ì£¼ë¬¸ í…Œì´ë¸”
   - ì£¼ë¬¸ ì‹ë³„ì: ë‚´ë¶€ ì£¼ë¬¸ë²ˆí˜¸(ìë™ ìƒì„±), ì™¸ë¶€ í”Œë«í¼ ì£¼ë¬¸ë²ˆí˜¸
   - ìƒì„¸ ì£¼ë¬¸ ìƒíƒœ: pending, confirmed, preparing, ready_to_ship, shipping, delivered, cancelled, refunded, exchanged
   - ê³ ê° ì •ë³´: ì´ë¦„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, ê³ ê° ID
   - ë°°ì†¡ ì •ë³´: ìˆ˜ë ¹ì¸ ì •ë³´, ì£¼ì†Œ, ë°°ì†¡ ë©”ëª¨, íƒë°°ì‚¬, ì†¡ì¥ë²ˆí˜¸
   - ê¸ˆì•¡ ì •ë³´: ìƒí’ˆ ê¸ˆì•¡, ë°°ì†¡ë¹„, í• ì¸ ê¸ˆì•¡, í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ, ê²°ì œ ìˆ˜ìˆ˜ë£Œ, ìµœì¢… ê²°ì œ ê¸ˆì•¡
   - ìë™ ê³„ì‚°: ì´ ì›ê°€, ìˆœì´ìµ, ìˆ˜ìµë¥  (ê³„ì‚°ëœ ì»¬ëŸ¼)
   - ê²°ì œ ì •ë³´: ê²°ì œ ìˆ˜ë‹¨, ê²°ì œ ìƒíƒœ, ê²°ì œ ì™„ë£Œ ì‹œê°
   - ì£¼ë¬¸ë²ˆí˜¸ ìë™ ìƒì„± íŠ¸ë¦¬ê±° (ORD-YYYYMMDD-0001 í˜•ì‹)
   - ìƒíƒœ ë³€ê²½ ì‹œê° ìë™ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°

4. **`008_commercial_order_items_table.sql`** - ì£¼ë¬¸ ìƒì„¸ í’ˆëª©
   - ì£¼ë¬¸ ìƒì„¸ í’ˆëª© ì •ë³´
   - ìƒí’ˆ ì •ë³´ ìŠ¤ëƒ…ìƒ· (ìƒí’ˆ ì‚­ì œë˜ì–´ë„ ì£¼ë¬¸ ê¸°ë¡ ìœ ì§€)
   - ìˆ˜ëŸ‰ ë° ê°€ê²©: ë‹¨ê°€(íŒë§¤ê°€), ë‹¨ê°€(ì›ê°€), ì†Œê³„, ì´ ì›ê°€
   - í• ì¸ ì •ë³´: í• ì¸ ê¸ˆì•¡, í• ì¸ìœ¨
   - ìë™ ê³„ì‚°: ìµœì¢… ê¸ˆì•¡, ìˆ˜ìµ, ìˆ˜ìµë¥  (ê³„ì‚°ëœ ì»¬ëŸ¼)
   - ì˜µì…˜ ì •ë³´: JSONBë¡œ ìƒ‰ìƒ, ì‚¬ì´ì¦ˆ ë“± ê´€ë¦¬
   - ì£¼ë¬¸ ì´ì•¡ ìë™ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°

---

### 2. í•µì‹¬ API êµ¬ì¡° âœ…

#### ìƒì„±ëœ API íŒŒì¼:
1. **`app/api/orders/sync/route.ts`** - ì£¼ë¬¸ ë™ê¸°í™” API
   - ì™¸ë¶€ ì‹œìŠ¤í…œ(Python ì„œë²„ ë“±)ì—ì„œ ê°€ì ¸ì˜¨ ì£¼ë¬¸ ë°ì´í„°ë¥¼ DBì— Upsert
   - ì¸ì¦ í™•ì¸ (ì„¸ì…˜ ê¸°ë°˜)
   - ìŠ¤í† ì–´ í™•ì¸ (store_id ì œê³µ ì‹œ)
   - ì£¼ë¬¸ ë° ì£¼ë¬¸ ìƒì„¸ í’ˆëª© Upsert
   - ìƒí’ˆ ì •ë³´ ìë™ ì¡°íšŒ ë° ì—°ê²°
   - ì—ëŸ¬ ì²˜ë¦¬ ë° ê²°ê³¼ ë°˜í™˜

2. **`app/api/dashboard/stats/route.ts`** - ëŒ€ì‹œë³´ë“œ í†µê³„ API
   - ë§¤ì¶œ, ìˆœì´ìµ, ì£¼ë¬¸ ê±´ìˆ˜ ê³„ì‚°
   - ë‚ ì§œ ë²”ìœ„ í•„í„° (ê¸°ë³¸ê°’: ìµœê·¼ 30ì¼)
   - ìŠ¤í† ì–´ë³„ í•„í„° (ì„ íƒ)
   - ì£¼ë¬¸ ìƒíƒœë³„ í†µê³„
   - ê²°ì œ ìƒíƒœë³„ í†µê³„
   - ì¼ë³„ í†µê³„ (ì°¨íŠ¸ìš©)
   - ì˜¤ëŠ˜ í†µê³„
   - ì˜ˆìƒ ì •ì‚°ê¸ˆ ê³„ì‚°

---

### 3. ëŒ€ì‹œë³´ë“œ UI ê³ ë„í™” âœ…

#### ìƒì„±ëœ ì»´í¬ë„ŒíŠ¸:
1. **`app/dashboard/DashboardStats.tsx`** - ëŒ€ì‹œë³´ë“œ í†µê³„ ì»´í¬ë„ŒíŠ¸
   - Recharts ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
   - ì‹¤ì œ DB ë°ì´í„° ì—°ê²° (`/api/dashboard/stats`)
   - í†µê³„ ì¹´ë“œ: ì˜¤ëŠ˜ ì£¼ë¬¸ ê±´ìˆ˜, ë°°ì†¡ ì¤€ë¹„ ì¤‘, ì·¨ì†Œ/ë°˜í’ˆ, ì˜ˆìƒ ì •ì‚°ê¸ˆ
   - ì°¨íŠ¸: ìµœê·¼ 7ì¼ ë§¤ì¶œ ì¶”ì´ (LineChart), ì£¼ë¬¸ ìƒíƒœë³„ ë¶„í¬ (BarChart)
   - ìˆ˜ìµ ìš”ì•½: ì´ ë§¤ì¶œ, ì´ ì›ê°€, ìˆœì´ìµ, ìˆ˜ìµë¥ 
   - ë¡œë”© ìƒíƒœ ë° ì—ëŸ¬ ì²˜ë¦¬

2. **`app/dashboard/orders/OrdersDataTable.tsx`** - ì£¼ë¬¸ ëª©ë¡ Datatable
   - TanStack Table ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
   - ì—‘ì…€ì²˜ëŸ¼ ê°•ë ¥í•œ ë°ì´í„° ê·¸ë¦¬ë“œ
   - í•„í„°ë§: ë‚ ì§œë³„, ìƒíƒœë³„, ê²€ìƒ‰
   - ì •ë ¬: ëª¨ë“  ì»¬ëŸ¼ ì •ë ¬ ê°€ëŠ¥
   - ê²€ìƒ‰: ì£¼ë¬¸ë²ˆí˜¸, ê³ ê°ëª…, ì´ë©”ì¼ë¡œ ê²€ìƒ‰
   - í˜ì´ì§€ë„¤ì´ì…˜: 20ê°œì”© í‘œì‹œ
   - ìƒíƒœ ì—…ë°ì´íŠ¸: ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ìƒíƒœ ë³€ê²½
   - ì£¼ë¬¸ ì‚­ì œ: í™•ì¸ í›„ ì‚­ì œ

#### ì—…ë°ì´íŠ¸ëœ íŒŒì¼:
- **`app/dashboard/page.tsx`**: DashboardStats ì»´í¬ë„ŒíŠ¸ í†µí•©

---

## ì£¼ìš” íŠ¹ì§•

### 1. ìƒìš© ì„œë¹„ìŠ¤ ìˆ˜ì¤€ì˜ ë””í…Œì¼
- ìˆ˜ìˆ˜ë£Œìœ¨, ë°°ì†¡ë¹„, í• ì¸ ì •ë³´ ëª¨ë‘ í¬í•¨
- ìˆœì´ìµ, ìˆ˜ìµë¥  ìë™ ê³„ì‚°
- ì£¼ë¬¸ ìƒíƒœ ìƒì„¸ ê´€ë¦¬
- ì¬ê³  ìë™ ì—…ë°ì´íŠ¸

### 2. ë°ì´í„° ë¬´ê²°ì„±
- RLS ì •ì±…ìœ¼ë¡œ ì‚¬ìš©ìë³„ ë°ì´í„° ê²©ë¦¬
- ì™¸ë˜í‚¤ ì œì•½ ì¡°ê±´
- ê³„ì‚°ëœ ì»¬ëŸ¼ìœ¼ë¡œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥

### 3. ìë™í™”
- ì£¼ë¬¸ë²ˆí˜¸ ìë™ ìƒì„±
- ì£¼ë¬¸ ì´ì•¡ ìë™ ê³„ì‚°
- ì¬ê³  ìë™ ì—…ë°ì´íŠ¸
- ìƒíƒœ ë³€ê²½ ì‹œê° ìë™ ê¸°ë¡

### 4. ì‚¬ìš©ì ê²½í—˜
- ì‹¤ì‹œê°„ í†µê³„ ëŒ€ì‹œë³´ë“œ
- ê°•ë ¥í•œ ë°ì´í„° ê·¸ë¦¬ë“œ (TanStack Table)
- ì§ê´€ì ì¸ í•„í„°ë§ ë° ê²€ìƒ‰
- ë°˜ì‘í˜• ë””ìì¸

---

## ì‹¤í–‰ ë°©ë²•

### 1. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
Supabase Dashboard > SQL Editorì—ì„œ ë‹¤ìŒ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰:
1. `005_commercial_stores_table.sql`
2. `006_commercial_products_table.sql`
3. `007_commercial_orders_table.sql`
4. `008_commercial_order_items_table.sql`

### 2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install recharts @tanstack/react-table --legacy-peer-deps
```

### 3. ë¹Œë“œ í™•ì¸
```bash
npm run build
```

---

## ë‹¤ìŒ ë‹¨ê³„ (ì„ íƒì‚¬í•­)

1. **ì£¼ë¬¸ ë™ê¸°í™” í˜ì´ì§€ ì—…ë°ì´íŠ¸**
   - `app/dashboard/orders/page.tsx`ë¥¼ `OrdersDataTable` ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©í•˜ë„ë¡ ì—…ë°ì´íŠ¸
   - ìƒˆë¡œìš´ DB ìŠ¤í‚¤ë§ˆì— ë§ê²Œ ë°ì´í„° ë¡œë”© ë¡œì§ ìˆ˜ì •

2. **Python ì„œë²„ ì—°ë™**
   - Python ì„œë²„ì—ì„œ ì£¼ë¬¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ `/api/orders/sync`ë¡œ ì „ì†¡í•˜ëŠ” ë¡œì§ êµ¬í˜„
   - ì£¼ë¬¸ ë™ê¸°í™” ë²„íŠ¼ í´ë¦­ ì‹œ Python ì„œë²„ í˜¸ì¶œ

3. **ì¶”ê°€ ê¸°ëŠ¥**
   - ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€
   - ìŠ¤í† ì–´ ê´€ë¦¬ í˜ì´ì§€
   - ê³ ê¸‰ ë¶„ì„ ë° ë¦¬í¬íŠ¸

---

**Phase 2 ì™„ë£Œ!** ğŸš€

ìƒìš© SaaS ìˆ˜ì¤€ì˜ E-Commerce ì•„í‚¤í…ì²˜ê°€ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.
