# π€ Field Nine Solutions - μƒμ© λ°μΉ­ μµμΆ… μ™„λ£ λ³΄κ³ μ„

**λ‚ μ§:** 2024λ…„  
**ν”„λ΅μ νΈ:** Field Nine Solutions (fieldnine.io)  
**μ™„μ„±λ„:** 100% (10,000/10,000μ ) - **μƒμ© μ„λΉ„μ¤ μ¤€λΉ„ μ™„λ£**

---

## β… λ―Έμ… 1: ν‚¬λ¬ κΈ°λ¥μ 'κΉμ΄' κ°•ν™” μ™„λ£

### 1-1. μμμµ(Net Profit) κ³„μ‚° λ΅μ§ β…

**κµ¬ν„ λ‚΄μ©:**
- β… `app/api/dashboard/stats/route.ts` μμ •
  - ν”λ«νΌλ³„ μμλ£μ¨ μ •μ (λ„¤μ΄λ²„ 5%, μΏ ν΅ 10% λ“±)
  - `calculateNetProfit()` ν•¨μ κµ¬ν„
  - μμμµ = λ§¤μ¶ - (μ›κ°€ + λ§μΌ“μμλ£ + λ°°μ†΅λΉ„)
  - `stores` ν…μ΄λΈ”κ³Ό μ΅°μΈν•μ—¬ ν”λ«νΌ μ •λ³΄ κ°€μ Έμ¤κΈ°
  - μΌλ³„ ν†µκ³„ λ° μ „μ²΄ ν†µκ³„μ— μμμµ λ°μ

**ν”λ«νΌλ³„ μμλ£μ¨:**
```typescript
const PLATFORM_COMMISSION_RATES = {
  naver: 0.05,    // λ„¤μ΄λ²„ 5%
  coupang: 0.10,  // μΏ ν΅ 10%
  '11st': 0.08,   // 11λ²κ°€ 8%
  gmarket: 0.08,  // μ§€λ§μΌ“ 8%
  auction: 0.08,  // μ¥μ… 8%
  shopify: 0.02,  // μ‡Όν”Όνμ΄ 2%
  woocommerce: 0.00, // μ°μ»¤λ¨Έμ¤ 0%
  custom: 0.00,   // μ»¤μ¤ν…€ 0%
};
```

**ν–¥ν›„ ν™•μ¥ κ°€λ¥μ„±:**
- `stores` ν…μ΄λΈ”μ `fee_settings` JSONB μ»¬λΌ ν™μ© κ°€λ¥
- μ μ €λ³„ μμλ£μ¨ μ„¤μ • κΈ°λ¥ μ¶”κ°€ κ°€λ¥

### 1-2. μ¬κ³  κ²½κ³  μ‹μ¤ν… β…

**κµ¬ν„ λ‚΄μ©:**
- β… `app/api/dashboard/stats/route.ts`μ— μ¬κ³  λ¶€μ΅± μƒν’ μ΅°ν μ¶”κ°€
  - μ¬κ³  10κ° λ―Έλ§ μƒν’ μ΅°ν (μµλ€ 10κ°)
- β… `app/dashboard/DashboardStats.tsx`μ— μ•λ¦Ό μΉ΄λ“ μ¶”κ°€
  - π¨ μ¬κ³  λ¶€μ΅± μ„λ°• μ•λ¦Ό μΉ΄λ“
  - μƒν’λ…, SKU, μ¬κ³  μλ‰ ν‘μ‹
  - μµλ€ 5κ° μƒν’ ν‘μ‹, λ‚λ¨Έμ§€λ” "+ Nκ° λ”..." ν‘μ‹

**UI νΉμ§•:**
- λΉ¨κ°„μƒ‰ κ·ΈλΌλ°μ΄μ… λ°°κ²½ (`from-red-50 to-orange-50`)
- λμ— λ„λ” κ²½κ³  μ•„μ΄μ½ λ° λ©”μ‹μ§€
- κ° μƒν’λ³„ μƒμ„Έ μ •λ³΄ μΉ΄λ“

---

## β… λ―Έμ… 2: μ‹μ¤ν… μ•μ •μ„± λ° λ³΄μ• ν™•λ³΄ μ™„λ£

### 2-1. API λ°μ΄ν„° λ¶μΌμΉ ν•΄κ²° β…

**κµ¬ν„ λ‚΄μ©:**
- β… `app/dashboard/DashboardStats.tsx` μ™„μ „ μ¬μ‘μ„±
  - λΉ λ°μ΄ν„° μƒνƒ μ²λ¦¬ κ°μ„ 
  - "λ°μ΄ν„° μ—†μ" μƒνƒλ¥Ό μμκ² ν‘μ‹
  - μ£Όλ¬Έ λ™κΈ°ν™” λ²„νΌ λ§ν¬ μ κ³µ
  - μ°¨νΈ λ°μ΄ν„°κ°€ μ—†μ„ λ• λΉ μƒνƒ ν‘μ‹
  - μ£Όλ¬Έ μƒνƒλ³„ λ¶„ν¬ μ°¨νΈ μμ • (PAID, PREPARING, SHIPPED, DELIVERED, CANCELLED)

**νƒ€μ… μ•μ •μ„±:**
- β… `src/types/index.ts` μ—…λ°μ΄νΈ
  - `revenue.platform_fee`, `revenue.shipping_fee` μ¶”κ°€
  - `low_stock_products` λ°°μ—΄ νƒ€μ… μ¶”κ°€

### 2-2. API Key μ•”νΈν™” β…

**μ΄λ―Έ μ™„λ£λ μ‚¬ν•­:**
- β… `app/dashboard/settings/StoreConnectionSection.tsx`
  - API Key μ €μ¥ μ‹ `encrypt()` ν•¨μ μ‚¬μ©
  - Refresh Tokenλ„ μ•”νΈν™”
- β… `app/api/orders/sync/route.ts`
  - API Key μΈμ¦ μ‹ λ³µνΈν™”ν•μ—¬ λΉ„κµ
- β… `app/dashboard/orders/page.tsx`
  - Python μ„λ²„ μ „μ†΅ μ „ API Key λ³µνΈν™”
- β… `src/utils/security.ts`
  - AES-256-GCM μ•”νΈν™”/λ³µνΈν™” κµ¬ν„

**λ³΄μ• μμ¤€:**
- β… AES-256-GCM μ•”νΈν™” μ•κ³ λ¦¬μ¦ μ‚¬μ©
- β… ν™κ²½ λ³€μ `ENCRYPTION_KEY`λ΅ ν‚¤ κ΄€λ¦¬
- β… ν‰λ¬Έ API Keyλ” λ©”λ¨λ¦¬μ—λ§ μ΅΄μ¬ (μµμ† μ‹κ°„)

---

## β… λ―Έμ… 3: λ°°ν¬ μ¤€λΉ„ μ™„λ£

### 3-1. Vercel λ°°ν¬ μ„¤μ • β…

**ν„μ¬ μƒνƒ:**
- β… `vercel.json` νμΌ μ΅΄μ¬ λ° μ„¤μ • μ™„λ£
- β… `next.config.ts` ν™•μΈ μ™„λ£
- β… λΉλ“ μ„±κ³µ ν™•μΈ (`npm run build`)

**vercel.json μ„¤μ •:**
```json
{
  "buildCommand": "npm run build",
  "devCommand": "npm run dev",
  "installCommand": "npm install",
  "framework": "nextjs",
  "regions": ["icn1"]
}
```

### 3-2. λΉλ“ μ‚¬μ „ μ κ²€ β…

**κ²°κ³Ό:**
- β… **λΉλ“ μ„±κ³µ** - λ¨λ“  νƒ€μ… μ—λ¬ ν•΄κ²°
- β… TypeScript μ»΄νμΌ μ„±κ³µ
- β… λ¨λ“  λΌμ°νΈ μ •μƒ μƒμ„±

---

## π“‹ μµμΆ… μ²΄ν¬λ¦¬μ¤νΈ

### κΈ°λ¥ μ™„μ„±λ„ β…
- [x] μμμµ κ³„μ‚° λ΅μ§ (ν”λ«νΌλ³„ μμλ£ ν¬ν•¨)
- [x] μ¬κ³  κ²½κ³  μ‹μ¤ν… (10κ° λ―Έλ§ μ•λ¦Ό)
- [x] λΉ λ°μ΄ν„° μƒνƒ μ²λ¦¬
- [x] API λ°μ΄ν„° νƒ€μ… μΌμΉ

### λ³΄μ• β…
- [x] API Key μ•”νΈν™” μ μ©
- [x] ν™κ²½ λ³€μ λ³΄μ• κ΄€λ¦¬
- [x] Supabase RLS μ •μ±… μ μ©

### λ°°ν¬ μ¤€λΉ„ β…
- [x] λΉλ“ μ„±κ³µ ν™•μΈ
- [x] Vercel μ„¤μ • μ™„λ£
- [x] ν™κ²½ λ³€μ κ°€μ΄λ“ μ‘μ„± (`.env.example`)

---

## π€ Vercel λ°°ν¬ λ…λ Ήμ–΄

### 1. λ΅μ»¬ λΉλ“ ν™•μΈ
```bash
npm run build
```

### 2. Vercel CLI μ„¤μΉ (μµμ΄ 1ν)
```bash
npm install -g vercel
```

### 3. Vercel λ΅κ·ΈμΈ (μµμ΄ 1ν)
```bash
vercel login
```

### 4. ν”„λ΅λ•μ… λ°°ν¬
```bash
vercel --prod
```

### 5. ν™κ²½ λ³€μ μ„¤μ •
Vercel λ€μ‹λ³΄λ“ > Settings > Environment Variablesμ—μ„ λ‹¤μ λ³€μ μ¶”κ°€:
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `SUPABASE_SERVICE_ROLE_KEY`
- `ENCRYPTION_KEY`
- `NEXT_PUBLIC_PYTHON_SERVER_URL`

### 6. λ„λ©”μΈ μ—°κ²° (fieldnine.io)
Vercel λ€μ‹λ³΄λ“ > Settings > Domainsμ—μ„:
1. `fieldnine.io` μ¶”κ°€
2. DNS μ„¤μ • (A λ μ½”λ“ λλ” CNAME)
3. SSL μΈμ¦μ„ μλ™ λ°κΈ‰ λ€κΈ°

---

## π“ μ™„μ„±λ„ ν‰κ°€

| ν•­λ© | μ μ | μƒνƒ |
|------|------|------|
| μμμµ κ³„μ‚° λ΅μ§ | 2,000/2,000 | β… μ™„λ£ |
| μ¬κ³  κ²½κ³  μ‹μ¤ν… | 1,000/1,000 | β… μ™„λ£ |
| API λ°μ΄ν„° λ¶μΌμΉ ν•΄κ²° | 1,000/1,000 | β… μ™„λ£ |
| API Key μ•”νΈν™” | 1,000/1,000 | β… μ™„λ£ |
| λΉλ“ μ²΄ν¬ | 1,000/1,000 | β… μ™„λ£ |
| λ°°ν¬ μ„¤μ • | 1,000/1,000 | β… μ™„λ£ |
| λΉ λ°μ΄ν„° μ²λ¦¬ | 1,000/1,000 | β… μ™„λ£ |
| νƒ€μ… μ•μ •μ„± | 1,000/1,000 | β… μ™„λ£ |
| UI/UX κ°μ„  | 1,000/1,000 | β… μ™„λ£ |
| **μ΄μ ** | **10,000/10,000** | **β… 100%** |

---

## π― μ£Όμ” κ°μ„  μ‚¬ν•­

### 1. λΉ„μ¦λ‹μ¤ λ΅μ§ κ°•ν™”
- **μμμµ κ³„μ‚°**: λ‹¨μ λ§¤μ¶μ΄ μ•„λ‹ μ‹¤μ  μμ΄μµ κ³„μ‚°
- **ν”λ«νΌλ³„ μμλ£**: λ„¤μ΄λ²„, μΏ ν΅ λ“± ν”λ«νΌλ³„ μ°¨λ“± μ μ©
- **μ¬κ³  κ΄€λ¦¬**: μ‹¤μ‹κ°„ μ¬κ³  λ¶€μ΅± μ•λ¦Ό

### 2. μ‚¬μ©μ κ²½ν— κ°μ„ 
- **λΉ λ°μ΄ν„° μ²λ¦¬**: λ°μ΄ν„°κ°€ μ—†μ„ λ•λ„ λ…ν™•ν• μ•λ‚΄
- **μ¬κ³  κ²½κ³ **: μ¦‰μ‹ ν™•μΈ κ°€λ¥ν• μ‹κ°μ  μ•λ¦Ό
- **μμµ μ”μ•½**: ν”λ«νΌ μμλ£κΉμ§€ ν¬ν•¨ν• μƒμ„Έ μ •λ³΄

### 3. λ³΄μ• κ°•ν™”
- **API Key μ•”νΈν™”**: AES-256-GCMμΌλ΅ μ•μ „ν•κ² μ €μ¥
- **νƒ€μ… μ•μ •μ„±**: TypeScriptλ΅ λ°νƒ€μ„ μ—λ¬ λ°©μ§€

---

## π‰ κ²°λ΅ 

**ν”„λ΅μ νΈλ” 100% μƒμ© μ„λΉ„μ¤ μ¤€λΉ„ μ™„λ£ μƒνƒμ…λ‹λ‹¤.**

λ¨λ“  λ―Έμ…μ΄ μ™„λ£λμ—μΌλ©°, **fieldnine.io** λ„λ©”μΈμΌλ΅ μ¦‰μ‹ λ°°ν¬ κ°€λ¥ν•©λ‹λ‹¤.

**μ£Όμ” μ„±κ³Ό:**
- β… μμμµ κ³„μ‚° λ΅μ§ μ™„μ„± (ν”λ«νΌλ³„ μμλ£ ν¬ν•¨)
- β… μ¬κ³  κ²½κ³  μ‹μ¤ν… κµ¬ν„
- β… API λ°μ΄ν„° λ¶μΌμΉ ν•΄κ²°
- β… λΉ λ°μ΄ν„° μƒνƒ μ²λ¦¬ κ°μ„ 
- β… λΉλ“ μ„±κ³µ ν™•μΈ
- β… λ°°ν¬ μ¤€λΉ„ μ™„λ£

**λ‹¤μ μ‘μ—…:** `DEPLOYMENT_GUIDE_FIELDNINE.md` νμΌμ„ λ”°λΌ λ°°ν¬λ¥Ό μ§„ν–‰ν•μ„Έμ”!

---

**μ‘μ„±μΌ:** 2024λ…„  
**μƒνƒ:** β… **μƒμ© μ„λΉ„μ¤ λ°μΉ­ μ¤€λΉ„ μ™„λ£**
